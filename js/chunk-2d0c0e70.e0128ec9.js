(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0e70"],{4482:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"fill-height"},[i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-col",{attrs:{md:"6"}},[i("v-card",{staticClass:"elevation-12"},[i("v-toolbar",{attrs:{dark:"",color:"primary"}},[i("v-toolbar-title",[t._v("新增掛號")])],1),i("v-card-text",[i("v-container",[i("v-form",{ref:"form",staticClass:"py-3",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-row",{attrs:{justify:"center"}},[i("v-col",{attrs:{md:"6"}},[i("v-text-field",{attrs:{label:"身分證","prepend-icon":"mdi-account-badge-horizontal-outline",rules:[function(){return!!t.identifier||"必須填入"},function(){return t.checkTaiwanID()||"身分證必須是10個字元且不符合台灣規則"}],clearable:"",dense:"",outlined:""},on:{input:t.checkID,"click:clear":t.clearIDAndBD},model:{value:t.identifier,callback:function(e){t.identifier=e},expression:"identifier"}})],1)],1),i("v-row",{attrs:{justify:"center"}},[i("v-col",{attrs:{md:"6"}},[i("v-menu",{ref:"birthMenu",attrs:{"close-on-content-click":!1,"return-value":t.birthDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.birthDate=e},"update:return-value":function(e){t.birthDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-text-field",t._g({attrs:{rules:[function(){return!!t.birthDate||"必須填入"}],label:"出生年月日","prepend-icon":"mdi-calendar-blank",readonly:"",dense:"",outlined:"",disabled:t.controlbirthDateActive},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}},n))]}}]),model:{value:t.birthMenu,callback:function(e){t.birthMenu=e},expression:"birthMenu"}},[i("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.birthMenu=!1}}},[t._v("Cancel")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.birthMenu.save(t.birthDate)}}},[t._v("OK")])],1)],1)],1)],1),i("v-row",{attrs:{justify:"center"}},[i("v-col",{attrs:{md:"6"}},[i("v-menu",{ref:"OnlineRegistrationMenu",attrs:{"close-on-content-click":!1,"return-value":t.OnlineRegistrationDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.OnlineRegistrationDate=e},"update:return-value":function(e){t.OnlineRegistrationDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[i("v-text-field",t._g({attrs:{rules:[function(){return!!t.OnlineRegistrationDate||"必須填入"}],label:"掛號日期","prepend-icon":"mdi-calendar-blank",readonly:"",dense:"",outlined:""},model:{value:t.OnlineRegistrationDate,callback:function(e){t.OnlineRegistrationDate=e},expression:"OnlineRegistrationDate"}},n))]}}]),model:{value:t.OnlineRegistrationMenu,callback:function(e){t.OnlineRegistrationMenu=e},expression:"OnlineRegistrationMenu"}},[i("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.OnlineRegistrationDate,callback:function(e){t.OnlineRegistrationDate=e},expression:"OnlineRegistrationDate"}},[i("v-spacer"),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.OnlineRegistrationMenu=!1}}},[t._v("Cancel")]),i("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.OnlineRegistrationMenu.save(t.OnlineRegistrationDate)}}},[t._v("OK")])],1)],1)],1)],1),i("v-row",{attrs:{justify:"center"}},["add"==t.action?i("v-btn",{staticClass:"mx-12",attrs:{dark:"",color:"primary"},on:{click:t.submit}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-send-check")]),t._v(" 送出 ")],1):t._e(),"add"==t.action?i("v-btn",{staticClass:"mx-12",attrs:{dark:"",color:"secondary"},on:{click:t.clear}},[i("v-icon",{attrs:{left:""}},[t._v("mdi-autorenew")]),t._v(" 清除 ")],1):t._e()],1)],1)],1)],1)],1)],1)],1)],1)},a=[],r=(i("a9e3"),i("9f12")),o=i("53fe"),c=i("8b83"),s=i("c65a"),l=i("c03e"),u=i("9ab4"),d=i("60a3"),v=i("4bb5"),f=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(s["a"])(e).apply(this,arguments)),t.identifier="",t.birthDate="",t.OnlineRegistrationDate="",t.action="add",t.valid=!0,t.controlbirthDateActive=!1,t}return Object(l["a"])(e,t),Object(o["a"])(e,[{key:"checkTaiwanID",value:function(){var t=/^[A-Z]{1}[1-2]{1}[0-9]{8}$/;if(t.test(this.identifier)){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=["10","11","12","13","14","15","16","17","34","18","19","20","21","22","35","23","24","25","26","27","28","29","32","30","31","33"],n=e.indexOf(this.identifier.charAt(0)),a=i[n]+this.identifier.substr(1,9),r=1*Number(a.charAt(0)),o=1;o<=9;o++)r+=Number(a.charAt(o))*(10-o);return r+=1*Number(a.charAt(10)),r%10==0}return!1}},{key:"data",value:function(){return{birthDate:"",OnlineRegistrationDate:"",OnlineRegistrationMenu:!1,birthMenu:!1}}},{key:"clear",value:function(){this.identifier="",this.birthDate="",this.OnlineRegistrationDate=""}},{key:"checkID",value:function(){var t=this;if(10==this.identifier.length){this.setOverLay(!0);var e="/patient/"+this.identifier;this.axios.get(e).then((function(t){return t.data})).then((function(e){var i=e.patient;t.birthDate=i["birthDate"],t.controlbirthDateActive=!0,t.setOverLay(!1)})).catch((function(e){t.setOverLay(!1),t.$toasted.show("請確認輸入是否正確",{type:"error",position:"top-right",duration:3e3})}))}}},{key:"clearIDAndBD",value:function(){this.birthDate="",this.controlbirthDateActive=!1}},{key:"submit",value:function(){var t=this;this.$refs.form.validate()&&(this.setOverLay(!0),this.axios.post("/registration",JSON.stringify({identifier:this.identifier,birthDate:this.birthDate,registrationDate:this.OnlineRegistrationDate})).then((function(t){return t.data})).then((function(e){e.ok;t.$toasted.show("新增成功",{type:"success",position:"top-right",duration:3e3}),t.setOverLay(!1),t.$router.push({path:"/admin/onlineregistration/onlineregistration"})})).catch((function(e){t.setOverLay(!1),t.$toasted.show("新增失敗，請注意掛號時間",{type:"error",position:"top-right",duration:3e3})})))}}]),e}(d["c"]);u["a"]([Object(v["a"])("Loader/setOverLay")],f.prototype,"setOverLay",void 0),f=u["a"]([d["a"]],f);var h=f,b=h,p=i("2877"),D=i("6544"),k=i.n(D),O=i("8336"),m=i("b0af"),y=i("99d9"),g=i("62ad"),x=i("a523"),R=i("2e4b"),w=i("4bd4"),V=i("132d"),_=i("e449"),M=i("0fd9"),j=i("2fa4"),A=i("8654"),C=i("71d9"),L=i("2a7f"),$=Object(p["a"])(b,n,a,!1,null,null,null);e["default"]=$.exports;k()($,{VBtn:O["a"],VCard:m["a"],VCardText:y["c"],VCol:g["a"],VContainer:x["a"],VDatePicker:R["a"],VForm:w["a"],VIcon:V["a"],VMenu:_["a"],VRow:M["a"],VSpacer:j["a"],VTextField:A["a"],VToolbar:C["a"],VToolbarTitle:L["a"]})}}]);
//# sourceMappingURL=chunk-2d0c0e70.e0128ec9.js.map