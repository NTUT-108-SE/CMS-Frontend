(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0e70"],{4482:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height"},[n("v-row",{attrs:{justify:"center",align:"center"}},[n("v-col",{attrs:{md:"6"}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("新增掛號")])],1),n("v-card-text",[n("v-container",[n("v-form",{ref:"form",staticClass:"py-3",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{md:"6"}},[n("v-text-field",{attrs:{label:"身分證","prepend-icon":"mdi-account-badge-horizontal-outline",rules:[function(){return!!t.identifier||"必須填入"},function(){return 10==t.identifier.length||"身分證必須是10個字元"}],clearable:"",dense:"",outlined:""},on:{input:t.checkID,"click:clear":t.clearIDAndBD},model:{value:t.identifier,callback:function(e){t.identifier=e},expression:"identifier"}})],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{md:"6"}},[n("v-menu",{ref:"birthMenu",attrs:{"close-on-content-click":!1,"return-value":t.birthDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.birthDate=e},"update:return-value":function(e){t.birthDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-text-field",t._g({attrs:{rules:[function(){return!!t.birthDate||"必須填入"}],label:"出生年月日","prepend-icon":"mdi-calendar-blank",readonly:"",dense:"",outlined:"",disabled:t.controlbirthDateActive},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}},i))]}}]),model:{value:t.birthMenu,callback:function(e){t.birthMenu=e},expression:"birthMenu"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.birthDate,callback:function(e){t.birthDate=e},expression:"birthDate"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.birthMenu=!1}}},[t._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.birthMenu.save(t.birthDate)}}},[t._v("OK")])],1)],1)],1)],1),n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{md:"6"}},[n("v-menu",{ref:"OnlineRegistrationMenu",attrs:{"close-on-content-click":!1,"return-value":t.OnlineRegistrationDate,transition:"scale-transition","offset-y":"","min-width":"290px"},on:{"update:returnValue":function(e){t.OnlineRegistrationDate=e},"update:return-value":function(e){t.OnlineRegistrationDate=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[n("v-text-field",t._g({attrs:{rules:[function(){return!!t.OnlineRegistrationDate||"必須填入"}],label:"掛號日期","prepend-icon":"mdi-calendar-blank",readonly:"",dense:"",outlined:""},model:{value:t.OnlineRegistrationDate,callback:function(e){t.OnlineRegistrationDate=e},expression:"OnlineRegistrationDate"}},i))]}}]),model:{value:t.OnlineRegistrationMenu,callback:function(e){t.OnlineRegistrationMenu=e},expression:"OnlineRegistrationMenu"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.OnlineRegistrationDate,callback:function(e){t.OnlineRegistrationDate=e},expression:"OnlineRegistrationDate"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.OnlineRegistrationMenu=!1}}},[t._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.OnlineRegistrationMenu.save(t.OnlineRegistrationDate)}}},[t._v("OK")])],1)],1)],1)],1),n("v-row",{attrs:{justify:"center"}},["add"==t.action?n("v-btn",{staticClass:"mx-12",attrs:{dark:"",color:"primary"},on:{click:t.submit}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-send-check")]),t._v(" 送出 ")],1):t._e(),"add"==t.action?n("v-btn",{staticClass:"mx-12",attrs:{dark:"",color:"secondary"},on:{click:t.clear}},[n("v-icon",{attrs:{left:""}},[t._v("mdi-autorenew")]),t._v(" 清除 ")],1):t._e()],1)],1)],1)],1)],1)],1)],1)],1)},a=[],r=n("9f12"),o=n("53fe"),l=n("8b83"),c=n("c65a"),s=n("c03e"),u=n("9ab4"),d=n("60a3"),v=n("4bb5"),f=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(l["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.identifier="",t.birthDate="",t.OnlineRegistrationDate="",t.action="add",t.valid=!0,t.controlbirthDateActive=!1,t}return Object(s["a"])(e,t),Object(o["a"])(e,[{key:"data",value:function(){return{birthDate:"",OnlineRegistrationDate:"",OnlineRegistrationMenu:!1,birthMenu:!1}}},{key:"clear",value:function(){this.identifier="",this.birthDate="",this.OnlineRegistrationDate=""}},{key:"checkID",value:function(){var t=this;if(10==this.identifier.length){this.setOverLay(!0);var e="/patient/"+this.identifier;this.axios.get(e).then((function(t){return t.data})).then((function(e){var n=e.patient;t.birthDate=n["birthDate"],t.controlbirthDateActive=!0,t.setOverLay(!1)})).catch((function(e){t.setOverLay(!1),t.$toasted.show("請確認輸入是否正確",{type:"error",position:"top-right",duration:3e3})}))}}},{key:"clearIDAndBD",value:function(){this.birthDate="",this.controlbirthDateActive=!1}},{key:"submit",value:function(){var t=this;this.$refs.form.validate()&&(this.setOverLay(!0),this.axios.post("/registration",JSON.stringify({identifier:this.identifier,birthDate:this.birthDate,registrationDate:this.OnlineRegistrationDate})).then((function(t){return t.data})).then((function(e){e.ok;t.$toasted.show("新增成功",{type:"success",position:"top-right",duration:3e3}),t.setOverLay(!1),t.$router.push({path:"/admin/onlineregistration/onlineregistration"})})).catch((function(e){t.setOverLay(!1),t.$toasted.show("新增失敗，請注意掛號時間",{type:"error",position:"top-right",duration:3e3})})))}}]),e}(d["c"]);u["a"]([Object(v["a"])("Loader/setOverLay")],f.prototype,"setOverLay",void 0),f=u["a"]([d["a"]],f);var h=f,b=h,p=n("2877"),D=n("6544"),O=n.n(D),k=n("8336"),y=n("b0af"),g=n("99d9"),m=n("62ad"),x=n("a523"),R=n("2e4b"),w=n("4bd4"),_=n("132d"),V=n("e449"),M=n("0fd9"),j=n("2fa4"),C=n("8654"),L=n("71d9"),$=n("2a7f"),A=Object(p["a"])(b,i,a,!1,null,null,null);e["default"]=A.exports;O()(A,{VBtn:k["a"],VCard:y["a"],VCardText:g["c"],VCol:m["a"],VContainer:x["a"],VDatePicker:R["a"],VForm:w["a"],VIcon:_["a"],VMenu:V["a"],VRow:M["a"],VSpacer:j["a"],VTextField:C["a"],VToolbar:L["a"],VToolbarTitle:$["a"]})}}]);
//# sourceMappingURL=chunk-2d0c0e70.ec370641.js.map